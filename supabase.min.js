window.supabase = {
  createClient: function(url, key) {
    return {
      from: function(table) {
        return {
          select: function(columns) {
            return fetch(url + '/rest/v1/' + table + '?select=' + columns, {
              headers: { 'apikey': key, 'Authorization': 'Bearer ' + key }
            }).then(r => r.json())
          },
          insert: function(data) {
            return fetch(url + '/rest/v1/' + table, {
              method: 'POST',
              headers: { 
                'apikey': key, 
                'Authorization': 'Bearer ' + key,
                'Content-Type': 'application/json',
                'Prefer': 'return=representation'
              },
              body: JSON.stringify(data)
            }).then(r => r.json())
          }
        }
      }
    }
  }
};
